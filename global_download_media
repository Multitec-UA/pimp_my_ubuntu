# Function to download media files from repo
global_download_media() {
    local file_path="${1:-}"
    local destination_dir="$GLOBAL_REAL_HOME/Documents/pimp_my_ubuntu"
    
    # Create destination directory if it doesn't exist
    mkdir -p "${GLOBAL_DOWNLOAD_DIR}"
    
    # Ensure the directory is owned by the real user
    chown "${GLOBAL_REAL_USER}:${GLOBAL_REAL_USER}" "${GLOBAL_DOWNLOAD_DIR}"
    
    if [[ -n "${file_path}" ]]; then
        global_log_message "INFO" "Downloading media file: ${file_path}"
        local output_file="${GLOBAL_DOWNLOAD_DIR}/$(basename "${file_path}")"
        
        # Use raw URL for GitHub content instead of API
        local raw_url="https://raw.githubusercontent.com/Multitec-UA/pimp_my_ubuntu/master${file_path}"
        curl -L -s "${raw_url}" -o "${output_file}"
        local curl_status=$?
        
        # Ensure the downloaded file is owned by the real user
        chown "${GLOBAL_REAL_USER}:${GLOBAL_REAL_USER}" "${output_file}"
        
        return $curl_status
    else
        global_log_message "ERROR" "No media file specified to download"
        return 1
    fi
}